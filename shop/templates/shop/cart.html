{% extends 'shop/base.html' %}

{% block content %}
<div class="page-wrapper" style="padding: 60px 20px;">
  <div class="cart-container" style="max-width: 1100px; margin: 0 auto;">

    <h1 class="home-title" style="font-size: 40px; margin-bottom: 30px; font-weight: 700; text-align:center;">
      üõí My Cart
    </h1>

    {% if items %}
    <table class="cart-table" style="width:100%; border-collapse: collapse; margin-bottom: 30px; font-size: 20px;">
      <thead>
        <tr style="background:#2c2c2c; color:#fff; font-size:22px;">
          <th style="padding:16px; text-align:left;">Product</th>
          <th style="padding:16px; text-align:center;">Size</th>
          <th style="padding:16px; text-align:center;">Price</th>
          <th style="padding:16px; text-align:center;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr style="background:#3a3a3a; color:#fff; border-bottom: 1px solid #555;">
          <td style="padding:16px; font-size:22px; font-weight:600;">
            {% if item.player and item.number %}
              {{ item.product }} - {{ item.player }} ({{ item.number }})
            {% else %}
              {{ item.product }}
            {% endif %}
          </td>

          <td style="text-align:center; padding:16px;">
            {% if item.chosen_size %}
              <span style="background:#ffcc00; color:#000; padding:6px 12px; border-radius:8px; font-size:18px; font-weight:700;">
                {{ item.chosen_size.name }}
              </span>
            {% else %}
              ‚Äî
            {% endif %}
          </td>

          <td style="text-align:center; padding:16px; font-size:22px; font-weight:700; color:#ff6600;">
            {{ item.product.price }} ‚Ç¨
          </td>
          <td style="text-align:center; padding:16px;">
            <form method="post" action="{% url 'remove-from-cart' item.id %}">
              {% csrf_token %}
              <button type="submit"
                      class="cart-remove-b"
                      style="color:#fff; border:none; padding:10px 20px; font-size:18px; border-radius:8px; cursor:pointer; font-weight:600;">
                Remove
              </button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <div class="cart-total" style="text-align:right; font-size:26px; font-weight:700; margin-top:20px;">
      Total:
      <span style="color:#ff6600;">
        {{ cart.total }} ‚Ç¨
      </span>
    </div>

    <div style="text-align:right; margin-top:25px;">
      <form id="checkout-form" method="get" action="{% url 'checkout-get' %}">
        {% csrf_token %}
        <button type="submit" class='proceed-to-payment-b' style="color:#fff; padding:14px 24px; border-radius:10px; text-decoration:none; font-size:20px; font-weight:700;">‚úÖ Checkout</button>
      </form>
    </div>

    {% else %}
    <div style="background:#3a3a3a; padding:60px; border-radius:16px; text-align:center; color:#ddd; box-shadow:0 4px 15px rgba(0,0,0,0.4);">
      <h2 style="color:#ffcc00; font-size:34px; margin-bottom:20px;">Your cart is empty</h2>
      <p style="font-size:24px; margin-bottom:30px;">Add some products to your cart and come back here!</p>
      <a href="{% url 'home' %}" style="background:#2C66AB; color:#fff; padding:16px 26px; border-radius:10px; text-decoration:none; font-size:22px;">
        üõç Start Shopping
      </a>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}