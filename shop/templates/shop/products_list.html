{% extends 'shop/base.html' %}

{% block content %}
  <h1 class="home-title" style="margin-top: 30px; font-size: 40px;">{{ category.name }} :
  </h1>
  <div class="products-container" style="margin-top:40px;">
      <div class="products-grid" style="
          display:grid;
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap:30px;
          justify-items:center;">

          {% for product in products %}
          <a href="{% url 'product-details' category_id=product.category.id pk=product.id %}"
             class="product-card"
             style="text-decoration:none; color:inherit; background:#3a3a3a; border-radius:12px; padding:15px; transition:transform 0.3s ease, box-shadow 0.3s ease; width:100%; max-width:300px; text-align:center;">

              {% if product.photo %}
                <img src="{{ product.photo.url }}" alt="Product photo"
                     style="height:300px; border-radius:10px; margin-bottom:15px;">
              {% else %}
                <div style="width:100%; height:200px; background:#555; border-radius:10px; display:flex; align-items:center; justify-content:center; color:#aaa;">
                  No Image
                </div>
              {% endif %}

              <h3 style="color:#ffcc00; margin:10px 0;">{{ product.price }} â‚¬</h3>

              {% if product.sold %}
                <p style="color:red; font-weight:600;">SOLD</p>
              {% else %}
                <p style="color:lightgreen; font-weight:600;">Available</p>
              {% endif %}
          </a>
          {% empty %}
          <h2 style="color:#bbb;">No products available in this category.</h2>
          {% endfor %}
      </div>
  </div>
{% endblock %}